<!DOCTYPE html>
<body>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/d3/3.5.3/d3.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/topojson/1.6.9/topojson.min.js"></script>
    <script src="datamaps.world.min.js"></script>
   
 
<script>
var csvdata = [];

d3.csv("master.csv", function(data) {
  data.forEach(function(d) {
    d.year = +d.year;
    d["suicides/100k pop"] = +d["suicides/100k pop"];
    csvdata.push(d);
  });
  //console.log(csvdata[0]);
});

//load csv -> filter through func(year, metric) -> output a json document 
console.log(csvdata); 
var rate = Filterdata(csvdata, 1987); 

function Filterdata(csvdata, year) {
  var temp = [];
  //console.log(csvdata);
  csvdata.forEach(function(d) {
    if (year == d.year) {
    	temp.push(d);
	}
  });
  return temp;             
}
console.log(rate);
</script>

</body>
